<div class="home-container">
  <mat-card class="header-card">
    <mat-card-header>
      <mat-card-title>Public Pets</mat-card-title>
      <mat-card-subtitle>Browse all publicly shared pets</mat-card-subtitle>
    </mat-card-header>
  </mat-card>

  <mat-card class="table-card">
    @if (isLoading()) {
    <div class="loading-container">
      <mat-spinner></mat-spinner>
    </div>
    }

    @if (!isLoading()) {
    <table mat-table [dataSource]="dataSource" class="pets-table">
      <!-- Photo Column -->
      <ng-container matColumnDef="photo">
        <th mat-header-cell *matHeaderCellDef>Photo</th>
        <td mat-cell *matCellDef="let element">
          @if (element.photoUrl) {
          <img [src]="element.photoUrl" alt="{{ element.name }}" class="pet-photo" />
          }
        </td>
      </ng-container>

      <!-- Name Column -->
      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef>Name</th>
        <td mat-cell *matCellDef="let element">{{ element.name }}</td>
      </ng-container>

      <!-- Species Column -->
      <ng-container matColumnDef="species">
        <th mat-header-cell *matHeaderCellDef>Species</th>
        <td mat-cell *matCellDef="let element">{{ element.species }}</td>
      </ng-container>

      <!-- Age Column -->
      <ng-container matColumnDef="age">
        <th mat-header-cell *matHeaderCellDef>Age</th>
        <td mat-cell *matCellDef="let element">
          {{ calculateAge(element.birthdate) }} years
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    </table>

    @if (dataSource.data.length === 0) {
    <div class="no-data">
      <p>No public pets found.</p>
    </div>
    }
    }
  </mat-card>
</div>