<div class="dashboard-shell">
  <mat-card>
    <div class="header-section">
      <h2>Your Pets</h2>
      <button mat-raised-button color="primary" routerLink="/add-pet" class="add-button">
        <mat-icon>add</mat-icon>
        <span>Add Pet</span>
      </button>
    </div>

    @if (isLoading()) {
    <div class="loading">
      <mat-progress-spinner mode="indeterminate" diameter="32"></mat-progress-spinner>
      <span>Loading...</span>
    </div>
    }

    @if (!isLoading()) {
    <table mat-table [dataSource]="dataSource" class="mat-elevation-z1">
      <!-- Photo -->
      <ng-container matColumnDef="photo">
        <th mat-header-cell *matHeaderCellDef>Photo</th>
        <td mat-cell *matCellDef="let pet">
          @if (pet.photoUrl) {
          <img [src]="pet.photoUrl" alt="photo" class="thumb" />
          }
        </td>
      </ng-container>

      <!-- Name -->
      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef>Name</th>
        <td mat-cell *matCellDef="let pet">{{ pet.name }}</td>
      </ng-container>

      <!-- Species -->
      <ng-container matColumnDef="species">
        <th mat-header-cell *matHeaderCellDef>Species</th>
        <td mat-cell *matCellDef="let pet">{{ pet.species }}</td>
      </ng-container>

      <!-- Age -->
      <ng-container matColumnDef="age">
        <th mat-header-cell *matHeaderCellDef>Age</th>
        <td mat-cell *matCellDef="let pet">{{ calculateAge(pet.birthdate) ?? '-' }}</td>
      </ng-container>

      <!-- Actions -->
      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef></th>
        <td mat-cell *matCellDef="let pet">
          <!-- placeholder for future actions like edit/delete -->
          <button mat-icon-button aria-label="Edit">
            <mat-icon>edit</mat-icon>
          </button>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    </table>
    }

    @if (!isLoading && dataSource.data.length === 0) {
    <div class="empty">
      <p>No pets yet. Add your first pet from the app.</p>
    </div>
    }
  </mat-card>
</div>